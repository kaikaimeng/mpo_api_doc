<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dso_meas &mdash; mpo_api 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=8d563738"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            mpo_api
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dso2kp.html">dso2kp module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_acquire.html">dso_acquire module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_awg.html">dso_awg module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_basic.html">dso_basic module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_channel.html">dso_channel module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_colors.html">dso_colors module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_const.html">dso_const module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_display.html">dso_display module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_dmm.html">dso_dmm module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_draw.html">dso_draw module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_gonogo.html">dso_gonogo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_gui.html">dso_gui module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_hardcopy.html">dso_hardcopy module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_math.html">dso_math module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_meas.html">dso_meas module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_power_supply.html">dso_power_supply module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_ref.html">dso_ref module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_sns.html">dso_sns module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_spectrum.html">dso_spectrum module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_timebase.html">dso_timebase module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dso_trigger.html">dso_trigger module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../load.html">load module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../psw.html">psw module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mpo_api</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">dso_meas</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for dso_meas</h1><div class="highlight"><pre>
<span></span><span class="c1"># Name: dso_meas.py</span>
<span class="c1">#</span>
<span class="c1"># Description: Perform automated measurements on the DSO.</span>
<span class="c1">#</span>
<span class="c1"># Author: GW Instek</span>
<span class="c1">#</span>
<span class="c1"># Documentation:</span>
<span class="c1"># https://github.com/OpenWave-GW/Python_APP</span>
<span class="c1">#</span>
<span class="c1"># License: GW Python APP License</span>
<span class="c1"># Copyright (c) 2023 GOOD WILL INSTRUMENT CO., LTD.</span>
<span class="c1"># https://github.com/OpenWave-GW/Python_APP/blob/main/LICENSE.txt</span>

<span class="sd">&quot;&quot;&quot;Perform automated measurements on the DSO.</span>

<span class="sd">Basic signal parameters in both vertical and horizontal dimensions are</span>
<span class="sd">calculated using the atuomated measurement functions.</span>

<span class="sd">Typical usage example:</span>

<span class="sd">.. code-block::</span>
<span class="sd">    </span>
<span class="sd">    from dso_const import *</span>
<span class="sd">    import dso2ke as gds</span>
<span class="sd">    </span>
<span class="sd">    # Create a Dso instance, myDso, and get connected to it.</span>
<span class="sd">    myDso = gds.Dso()</span>
<span class="sd">    ret = myDso.connect(host=&#39;localhost&#39;, port=3000)</span>
<span class="sd">    if ret != 0:</span>
<span class="sd">        raise ValueError(&#39;Socket connection failed.&#39;)</span>

<span class="sd">    # List all supported measurements in the REPL</span>
<span class="sd">    myDso.meas.help()</span>
<span class="sd">    </span>
<span class="sd">    # Perform automated measurements on input sources.</span>
<span class="sd">    vmax = myDso.meas.get_max(kCH1)</span>
<span class="sd">    freq = myDso.meas.get_frequency(kCH1)</span>
<span class="sd">    phase = myDso.meas.get_phase(kCH1, kCH2)</span>
<span class="sd">    vpp_math = myDso.meas.get_vpp(kMATH1)</span>
<span class="sd">    </span>
<span class="sd">    # Control of active measurements</span>
<span class="sd">    myDso.meas.update() # update from current active measurements</span>
<span class="sd">    myDso.meas.remove_all() # Clean up all active measurements</span>
<span class="sd">    myDso.meas.add(1, &#39;max&#39;, kCH1)</span>
<span class="sd">    myDso.meas.add(2, &#39;phase&#39;, kCH1, kCH2)</span>
<span class="sd">    phase_diff = myDso.meas._value(2)</span>
<span class="sd">    myDso.meas.remove(1)</span>
<span class="sd">    </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">dso_const</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">__VERSION__</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">_reference_level_units</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;percent&#39;</span> <span class="p">:</span><span class="s1">&#39;PERCent&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_reference_level_types</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;LOW&#39;</span><span class="p">,</span> <span class="s1">&#39;MID&#39;</span><span class="p">,</span> <span class="s1">&#39;MID2&#39;</span><span class="p">,</span> <span class="s1">&#39;HIGH&#39;</span> <span class="p">]</span>

<span class="n">_DEFAULT_REFERENCE_LEVELS_PERCENT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;LOW&#39;</span> <span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="s1">&#39;MID&#39;</span> <span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
    <span class="s1">&#39;MID2&#39;</span> <span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
    <span class="s1">&#39;HIGH&#39;</span> <span class="p">:</span> <span class="mf">90.0</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_volt_measures</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;amplitude&#39;</span> <span class="p">:</span> <span class="s1">&#39;AMPlitude&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mean&#39;</span> <span class="p">:</span> <span class="s1">&#39;MEAN&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cyclemean&#39;</span> <span class="p">:</span> <span class="s1">&#39;CMEan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;high&#39;</span> <span class="p">:</span> <span class="s1">&#39;HIGH&#39;</span><span class="p">,</span>
    <span class="s1">&#39;low&#39;</span> <span class="p">:</span> <span class="s1">&#39;LOW&#39;</span><span class="p">,</span>
    <span class="s1">&#39;max&#39;</span> <span class="p">:</span> <span class="s1">&#39;MAXimum&#39;</span><span class="p">,</span>
    <span class="s1">&#39;min&#39;</span> <span class="p">:</span> <span class="s1">&#39;MINImum&#39;</span><span class="p">,</span>
    <span class="s1">&#39;vpp&#39;</span> <span class="p">:</span> <span class="s1">&#39;PK2pk&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rms&#39;</span> <span class="p">:</span> <span class="s1">&#39;RMS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cyclerms&#39;</span> <span class="p">:</span> <span class="s1">&#39;CRMS&#39;</span><span class="p">,</span>
    <span class="s1">&#39;area&#39;</span> <span class="p">:</span> <span class="s1">&#39;AREa&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cyclearea&#39;</span> <span class="p">:</span> <span class="s1">&#39;CARea&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_time_measures</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;falltime&#39;</span> <span class="p">:</span> <span class="s1">&#39;FALL&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fallovershoot&#39;</span> <span class="p">:</span> <span class="s1">&#39;FOVShoot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fallpreshoot&#39;</span> <span class="p">:</span> <span class="s1">&#39;FPReshoot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;frequency&#39;</span> <span class="p">:</span> <span class="s1">&#39;FREQuency&#39;</span><span class="p">,</span>
    <span class="s1">&#39;-width&#39;</span> <span class="p">:</span> <span class="s1">&#39;NWIDth&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+width&#39;</span> <span class="p">:</span> <span class="s1">&#39;PWIDth&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+duty&#39;</span> <span class="p">:</span> <span class="s1">&#39;PDUTy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;period&#39;</span> <span class="p">:</span> <span class="s1">&#39;PERiod&#39;</span><span class="p">,</span>
    <span class="s1">&#39;risetime&#39;</span> <span class="p">:</span> <span class="s1">&#39;RISe&#39;</span><span class="p">,</span>
    <span class="s1">&#39;riseovershoot&#39;</span> <span class="p">:</span> <span class="s1">&#39;ROVShoot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;risepreshoot&#39;</span> <span class="p">:</span> <span class="s1">&#39;RPReshoot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+pulse&#39;</span> <span class="p">:</span> <span class="s1">&#39;PPULSE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;-pulse&#39;</span> <span class="p">:</span> <span class="s1">&#39;NPULSE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+edge&#39;</span> <span class="p">:</span> <span class="s1">&#39;PEDGE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;-edge&#39;</span> <span class="p">:</span> <span class="s1">&#39;NEDGE&#39;</span><span class="p">,</span>
    <span class="s1">&#39;flickindexpercent&#39;</span> <span class="p">:</span> <span class="s1">&#39;PFLIcker&#39;</span><span class="p">,</span>
    <span class="s1">&#39;flickindex&#39;</span> <span class="p">:</span> <span class="s1">&#39;FLIcker&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_delay_measures</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;frr&#39;</span> <span class="p">:</span> <span class="s1">&#39;FRRDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;frf&#39;</span> <span class="p">:</span> <span class="s1">&#39;FRFDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ffr&#39;</span> <span class="p">:</span> <span class="s1">&#39;FFRDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fff&#39;</span> <span class="p">:</span> <span class="s1">&#39;FFFDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lrr&#39;</span> <span class="p">:</span> <span class="s1">&#39;LRRDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lrf&#39;</span> <span class="p">:</span> <span class="s1">&#39;LRFDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lfr&#39;</span> <span class="p">:</span> <span class="s1">&#39;LFRDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lff&#39;</span> <span class="p">:</span> <span class="s1">&#39;LFFDelay&#39;</span><span class="p">,</span>
    <span class="s1">&#39;phase&#39;</span> <span class="p">:</span> <span class="s1">&#39;PHAse&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_all_measures</span> <span class="o">=</span> <span class="p">[</span> <span class="n">_volt_measures</span><span class="p">,</span> <span class="n">_time_measures</span><span class="p">,</span> <span class="n">_delay_measures</span> <span class="p">]</span>
<span class="n">_all_supported_soruces</span> <span class="o">=</span> <span class="p">[</span> <span class="n">kANALOGx</span><span class="p">,</span> <span class="n">kMATHx</span> <span class="p">]</span>

<span class="k">def</span> <span class="nf">_flatten_all_measures</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Flatten all measures</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">x_meas</span> <span class="ow">in</span> <span class="n">_all_measures</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">x_meas</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

    
<span class="k">def</span> <span class="nf">_get_supported_sources</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Get supported sources for measurements </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">x_src</span> <span class="ow">in</span> <span class="n">_all_supported_soruces</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">x_src</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

    
<div class="viewcode-block" id="MeasureError">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.MeasureError">[docs]</a>
<span class="k">class</span> <span class="nc">MeasureError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>



<div class="viewcode-block" id="Measure">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure">[docs]</a>
<span class="k">class</span> <span class="nc">Measure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This module controls the automated measurement function on the DSO.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s1">&#39;A parent object of class DsoBasic or&#39;</span>
                    <span class="sa">f</span><span class="s1">&#39;its derived class is required.&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">write</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dso</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">Measure</span><span class="o">.</span><span class="n">all_measures</span> <span class="o">=</span> <span class="n">_flatten_all_measures</span><span class="p">()</span>
        <span class="n">Measure</span><span class="o">.</span><span class="n">supported_sources</span> <span class="o">=</span> <span class="n">_get_supported_sources</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset</span><span class="p">()</span>

<div class="viewcode-block" id="Measure.help">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.help">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">help</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Show all available measurements &quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Measure</span><span class="o">.</span><span class="n">all_measures</span><span class="p">)</span>
        <span class="n">str_help</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Available </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s1"> measurements are:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">str_content</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="n">_all_measures</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_x</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
        <span class="n">str_help</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">str_help</span><span class="si">}{</span><span class="n">str_content</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">str_help</span><span class="p">)</span></div>

        
    <span class="k">def</span> <span class="nf">_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_measurements</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_measurements</span> <span class="o">=</span> <span class="p">{}</span>
        
    <span class="k">def</span> <span class="nf">_measurement_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meas</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Send command regarding a given measurement, and get the result</span>
<span class="sd">        accordingly.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            meas (str): index key for a given measurement defined in</span>
<span class="sd">                        dso_meas.Measure.all_measures.</span>
<span class="sd">                        </span>
<span class="sd">            args (int): source(s) with respect to a given measurement above.</span>
<span class="sd">                        See dso_meas.Measure.supported_sources.</span>
<span class="sd">                        </span>
<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred parsing the input argument.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">Measure</span><span class="o">.</span><span class="n">all_measures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">meas</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">source</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Measure</span><span class="o">.</span><span class="n">supported_sources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">args</span> <span class="p">]</span>
            <span class="k">if</span> <span class="n">meas</span> <span class="ow">in</span> <span class="n">_delay_measures</span><span class="p">:</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASure:SOURce1 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">;:MEASure:SOURce2 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">;:MEASure:</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s1">?&#39;</span>
                    <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid sources : </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASure:SOURce1 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">;:MEASure:</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s1">?&#39;</span>
                <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid sources : </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cmd</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fvalue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">fvalue</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid measurement item : </span><span class="si">{</span><span class="n">meas</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            
<div class="viewcode-block" id="Measure.get_frr">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_frr">[docs]</a>
    <span class="k">def</span> <span class="nf">get_frr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;frr&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_frf">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_frf">[docs]</a>
    <span class="k">def</span> <span class="nf">get_frf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;frf&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_ffr">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_ffr">[docs]</a>
    <span class="k">def</span> <span class="nf">get_ffr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;ffr&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_fff">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_fff">[docs]</a>
    <span class="k">def</span> <span class="nf">get_fff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;fff&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_lrr">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_lrr">[docs]</a>
    <span class="k">def</span> <span class="nf">get_lrr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;lrr&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_lrf">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_lrf">[docs]</a>
    <span class="k">def</span> <span class="nf">get_lrf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;lrf&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_lfr">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_lfr">[docs]</a>
    <span class="k">def</span> <span class="nf">get_lfr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;lfr&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_lff">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_lff">[docs]</a>
    <span class="k">def</span> <span class="nf">get_lff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;lff&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_phase">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_phase">[docs]</a>
    <span class="k">def</span> <span class="nf">get_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_max">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_max">[docs]</a>
    <span class="k">def</span> <span class="nf">get_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_min">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_min">[docs]</a>
    <span class="k">def</span> <span class="nf">get_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_high">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_high">[docs]</a>
    <span class="k">def</span> <span class="nf">get_high</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_low">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_low">[docs]</a>
    <span class="k">def</span> <span class="nf">get_low</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_amplitude">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_amplitude">[docs]</a>
    <span class="k">def</span> <span class="nf">get_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;amplitude&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_vpp">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_vpp">[docs]</a>
    <span class="k">def</span> <span class="nf">get_vpp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;vpp&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_mean">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_mean">[docs]</a>
    <span class="k">def</span> <span class="nf">get_mean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_rms">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_rms">[docs]</a>
    <span class="k">def</span> <span class="nf">get_rms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;rms&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_area">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_area">[docs]</a>
    <span class="k">def</span> <span class="nf">get_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_cyclemean">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_cyclemean">[docs]</a>
    <span class="k">def</span> <span class="nf">get_cyclemean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;cyclemean&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_cyclerms">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_cyclerms">[docs]</a>
    <span class="k">def</span> <span class="nf">get_cyclerms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;cyclerms&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_cyclearea">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_cyclearea">[docs]</a>
    <span class="k">def</span> <span class="nf">get_cyclearea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;cyclearea&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_frequency">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_frequency">[docs]</a>
    <span class="k">def</span> <span class="nf">get_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_period">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_period">[docs]</a>
    <span class="k">def</span> <span class="nf">get_period</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;period&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_falltime">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_falltime">[docs]</a>
    <span class="k">def</span> <span class="nf">get_falltime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;falltime&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_fallovershoot">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_fallovershoot">[docs]</a>
    <span class="k">def</span> <span class="nf">get_fallovershoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;fallovershoot&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_fallpreshoot">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_fallpreshoot">[docs]</a>
    <span class="k">def</span> <span class="nf">get_fallpreshoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;fallpreshoott&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_neg_width">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_neg_width">[docs]</a>
    <span class="k">def</span> <span class="nf">get_neg_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;-width&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_pos_width">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_pos_width">[docs]</a>
    <span class="k">def</span> <span class="nf">get_pos_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;+width&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_pos_duty">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_pos_duty">[docs]</a>
    <span class="k">def</span> <span class="nf">get_pos_duty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;+duty&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_risetime">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_risetime">[docs]</a>
    <span class="k">def</span> <span class="nf">get_risetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;risetime&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_riseovershoot">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_riseovershoot">[docs]</a>
    <span class="k">def</span> <span class="nf">get_riseovershoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;riseovershoot&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_risepreshoot">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_risepreshoot">[docs]</a>
    <span class="k">def</span> <span class="nf">get_risepreshoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;risepreshoot&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>        </div>

        
<div class="viewcode-block" id="Measure.get_pos_pulse">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_pos_pulse">[docs]</a>
    <span class="k">def</span> <span class="nf">get_pos_pulse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;+pulse&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_neg_pulse">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_neg_pulse">[docs]</a>
    <span class="k">def</span> <span class="nf">get_neg_pulse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;-pulse&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_pos_edge">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_pos_edge">[docs]</a>
    <span class="k">def</span> <span class="nf">get_pos_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;+edge&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_neg_edge">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_neg_edge">[docs]</a>
    <span class="k">def</span> <span class="nf">get_neg_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;-edge&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_flickindex_percent">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_flickindex_percent">[docs]</a>
    <span class="k">def</span> <span class="nf">get_flickindex_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;flickindexpercent&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.get_flickindex">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_flickindex">[docs]</a>
    <span class="k">def</span> <span class="nf">get_flickindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measurement_cmd</span><span class="p">(</span><span class="s1">&#39;flickindex&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>


<div class="viewcode-block" id="Measure.get_reference_levels">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.get_reference_levels">[docs]</a>
    <span class="k">def</span> <span class="nf">get_reference_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;percent&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get reference settings for measurements.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            _levels (dict) : settings in a dict form.</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred parsing the input argument.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>    
        <span class="n">_unit</span> <span class="o">=</span> <span class="n">_reference_level_units</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_unit</span><span class="p">:</span>
            <span class="n">_levels</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">_type</span> <span class="ow">in</span> <span class="n">_reference_level_types</span><span class="p">:</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;MEASUrement:REFLevel:</span><span class="si">{</span><span class="n">_unit</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">_type</span><span class="si">}</span><span class="s1">?&#39;</span>
                <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fvalue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
                    <span class="n">_levels</span><span class="p">[</span><span class="n">_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">fvalue</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">_levels</span><span class="p">[</span><span class="n">_type</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">_levels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid unit for ref. levels : </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="Measure.set_reference_levels">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.set_reference_levels">[docs]</a>
    <span class="k">def</span> <span class="nf">set_reference_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rlvls</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span>  <span class="n">unit</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;percent&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Setup reference levels in a dict form.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            rlvls (dict): reference levels</span>
<span class="sd">            </span>
<span class="sd">            unit (str, optional): unit of reference levels</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred parsing the input argument.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_unit</span> <span class="o">=</span> <span class="n">_reference_level_units</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_unit</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_type</span><span class="p">,</span> <span class="n">_set_val</span> <span class="ow">in</span> <span class="n">rlvls</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">_set_val</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;MEASUrement:REFLevel:</span><span class="si">{</span><span class="n">_unit</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">_type</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">_set_val</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid unit for ref. levels : </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="Measure.reset_reference_levels">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.reset_reference_levels">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_reference_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;percent&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Set reference levels to defaults.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            unit (str, optional): unit of reference levels</span>

<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred parsing the input argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;percent&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_reference_levels</span><span class="p">(</span><span class="n">_DEFAULT_REFERENCE_LEVELS_PERCENT</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid unit for ref. levels : </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Measure.is_on">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.is_on">[docs]</a>
    <span class="k">def</span> <span class="nf">is_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Check state of a given measurement item.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.        </span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            True if the state of a given measurement is &#39;ON&#39; else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:STATE?&#39;</span>
        <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span></div>

        
    <span class="k">def</span> <span class="nf">_get_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get type of a given measurement item.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>
<span class="sd">        </span>
<span class="sd">        Returns:    </span>
<span class="sd">            _type (str): index key for a given item defined in</span>
<span class="sd">                        dso_meas.Measure.all_measures.        </span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred if multiple types are found.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:TYPe?&#39;</span>
            <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
            <span class="n">_type</span> <span class="o">=</span> <span class="p">[</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">Measure</span><span class="o">.</span><span class="n">all_measures</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">ret</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">_type</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s1"> not found.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s1"> multiple hits:</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">_type</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">_get_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get sources of a give measurement item.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            _sources (tuple): A 2-element tuple regardless the state of the given item.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_sources</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:&#39;</span>
        <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;SOUrce</span><span class="si">{</span><span class="n">_x</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">?&#39;</span>
            <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
            <span class="n">_sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_sources</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Summerize a give measurement item.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>
<span class="sd">                        </span>
<span class="sd">        Returns:</span>
<span class="sd">            d (dict): information for a given measurement item.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;state&#39;</span> <span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;sources&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_sources</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">d</span>

    
    <span class="k">def</span> <span class="nf">_num</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get total number of active measurement items. &quot;&quot;&quot;</span>
        <span class="n">tot</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">_x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_measurements</span><span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">tot</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Get value of measurement items</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>
<span class="sd">            </span>
<span class="sd">        Returns:</span>
<span class="sd">            _value (float): the value of the given measurement item.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="n">_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:&#39;</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;VALue?&#39;</span>
            <span class="n">_value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span> <span class="c1"># Always return a numeric value regardless the state of either channel.</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">_value</span>
    
<div class="viewcode-block" id="Measure.remove">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.remove">[docs]</a>
    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Remove existing measurment items</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred for non-existed items.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_measurements</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="n">_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:&#39;</span>
                <span class="n">_state_off</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;STATE OFF&#39;</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="n">_state_off</span>
                <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_measurements</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid measurement item : </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.add">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.add">[docs]</a>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">meas</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add new measurment items or change existing ones.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            item (int): measurement of interested ranges in 1 to a maximum item,</span>
<span class="sd">                        which is 8 by default.</span>

<span class="sd">            meas (str): index key for a given measurement defined in</span>
<span class="sd">                        dso_meas.Measure.all_measures.</span>
<span class="sd">                        </span>
<span class="sd">            args (int): source(s) with respect to a given measurement above.</span>
<span class="sd">                        See dso_meas.Measure.supported_sources.</span>

<span class="sd">        Raises:</span>
<span class="sd">            MeasureError: An error occurred parsing the input argument.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_measurements</span><span class="p">:</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">Measure</span><span class="o">.</span><span class="n">all_measures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">meas</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="p">:</span>
                <span class="n">_prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;:MEASUrement:MEAS</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">:&#39;</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">source</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Measure</span><span class="o">.</span><span class="n">supported_sources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">args</span> <span class="p">]</span>
                <span class="k">if</span> <span class="n">meas</span> <span class="ow">in</span> <span class="n">_delay_measures</span><span class="p">:</span>
                    <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                        <span class="n">_sources</span> <span class="o">=</span> <span class="p">(</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">source</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">_source1</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;SOUrce1 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">;&#39;</span>
                        <span class="n">_source2</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;SOUrce2 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">;&#39;</span>
                        <span class="n">_type</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;TYPe </span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s1">;&#39;</span>
                        <span class="n">_state_on</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;STATE ON&#39;</span>
                        <span class="n">cmd</span> <span class="o">=</span> <span class="n">_source1</span> <span class="o">+</span> <span class="n">_source2</span> <span class="o">+</span> <span class="n">_type</span> <span class="o">+</span> <span class="n">_state_on</span>
                        <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Two sources required.&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">_sources</span> <span class="o">=</span> <span class="p">(</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">)</span>
                    <span class="n">_source1</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;SOUrce1 </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">;&#39;</span>
                    <span class="n">_type</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;TYPe </span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s1">;&#39;</span>
                    <span class="n">_state_on</span> <span class="o">=</span> <span class="n">_prefix</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;STATE ON&#39;</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="n">_source1</span> <span class="o">+</span> <span class="n">_type</span> <span class="o">+</span> <span class="n">_state_on</span>
                    <span class="n">cmd</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terminator</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid sources : </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">cmd</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dict_measurements</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                                                        <span class="n">sources</span> <span class="o">=</span> <span class="n">_sources</span><span class="p">,</span>
                                                        <span class="nb">type</span> <span class="o">=</span> <span class="n">meas</span>
                                                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">num_measurements</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid measurement item : </span><span class="si">{</span><span class="n">meas</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Max. item </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_measurements</span><span class="si">}</span><span class="s1"> exceeded.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Measure.update">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.update">[docs]</a>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Update the instance with active measurements on the instrument. &quot;&quot;&quot;</span>
        <span class="n">update_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Measure.remove_all">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.Measure.remove_all">[docs]</a>
    <span class="k">def</span> <span class="nf">remove_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Remove all active measurements on the instrument. &quot;&quot;&quot;</span>
        <span class="n">remove_measure_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
</div>


        
<div class="viewcode-block" id="remove_measure_all">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.remove_measure_all">[docs]</a>
<span class="k">def</span> <span class="nf">remove_measure_all</span><span class="p">(</span><span class="n">mobj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Remove all active measurements from a instance of Measure.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        mobj (Measure): target instance for the update.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">dso_meas</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mobj</span><span class="p">,</span> <span class="n">dso_meas</span><span class="o">.</span><span class="n">Measure</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Must be a instance of Meaure&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mobj</span><span class="o">.</span><span class="n">max_measurements</span><span class="p">):</span>
        <span class="n">_sel</span> <span class="o">=</span> <span class="n">_x</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">mobj</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">_sel</span><span class="p">):</span>
            <span class="n">mobj</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_sel</span><span class="p">)</span> </div>


<div class="viewcode-block" id="update_measure">
<a class="viewcode-back" href="../dso_meas.html#dso_meas.update_measure">[docs]</a>
<span class="k">def</span> <span class="nf">update_measure</span><span class="p">(</span><span class="n">mobj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Update a instance of Measure with active measurements on the instrument.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        mobj (Measure): target instance for the update.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">dso_meas</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mobj</span><span class="p">,</span> <span class="n">dso_meas</span><span class="o">.</span><span class="n">Measure</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MeasureError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Must be a instance of Meaure&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mobj</span><span class="o">.</span><span class="n">max_measurements</span><span class="p">):</span>
        <span class="n">_sel</span> <span class="o">=</span> <span class="n">_x</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">mobj</span><span class="o">.</span><span class="n">is_on</span><span class="p">(</span><span class="n">_sel</span><span class="p">):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">mobj</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">_sel</span><span class="p">)</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">mobj</span><span class="o">.</span><span class="n">supported_sources</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">_src</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;sources&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_src</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">sources</span><span class="p">:</span>
                <span class="n">mobj</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_sel</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span> <span class="o">*</span><span class="n">sources</span><span class="p">)</span></div>


       
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Command line arguments</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        sys.argv[1] (str, optional): connection string</span>
<span class="sd">        </span>
<span class="sd">    Examples:</span>
<span class="sd">        # Run in local loop-back</span>
<span class="sd">            python dso_meas.py</span>
<span class="sd">            </span>
<span class="sd">        # Run with user&#39;s connection</span>
<span class="sd">            python dso_meas.py 192.168.1.1:3000</span>
<span class="sd">            </span>
<span class="sd">        # Run with auto-scanning port</span>
<span class="sd">            python dso_meas.py 192.168.1.1</span>
<span class="sd">            </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_host</span><span class="o">=</span> <span class="s1">&#39;localhost:3000&#39;</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">_host</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
        
    <span class="k">if</span> <span class="n">_host</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">):</span>
        <span class="n">_host</span><span class="p">,</span> <span class="n">_port</span> <span class="o">=</span> <span class="n">_host</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">_port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_port</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_port</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid port no:</span><span class="si">{</span><span class="n">_port</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">__debug__</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Connecting </span><span class="si">{</span><span class="n">_host</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">_port</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_port</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Auto-scan mode</span>

    <span class="kn">import</span> <span class="nn">dso2ke</span> <span class="k">as</span> <span class="nn">gds</span>
    <span class="n">myDso</span> <span class="o">=</span> <span class="n">gds</span><span class="o">.</span><span class="n">Dso</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">_host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">_port</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Socket connection failed.&#39;</span><span class="p">)</span>
    
    <span class="c1"># List all supported measurements</span>
    <span class="c1"># myDso.meas.help()</span>
    
    <span class="c1"># Perform automated measurements on input sources.</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_frequency</span><span class="p">(</span><span class="n">kCH1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Freq(</span><span class="si">{</span><span class="n">kCH1</span><span class="si">}</span><span class="s1">) = </span><span class="si">{</span><span class="n">freq</span><span class="si">}</span><span class="s1"> Hz&#39;</span><span class="p">)</span>

    <span class="n">vmax</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_max</span><span class="p">(</span><span class="n">kCH1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Max(</span><span class="si">{</span><span class="n">kCH1</span><span class="si">}</span><span class="s1">) = </span><span class="si">{</span><span class="n">vmax</span><span class="si">}</span><span class="s1"> volt&#39;</span><span class="p">)</span>
    
    <span class="n">phase</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_phase</span><span class="p">(</span><span class="n">kCH1</span><span class="p">,</span> <span class="n">kCH2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Phase(</span><span class="si">{</span><span class="n">kCH1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">kCH2</span><span class="si">}</span><span class="s1">) = </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s1"> deg.&#39;</span><span class="p">)</span>
    
    <span class="n">frr</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_frr</span><span class="p">(</span><span class="n">kCH1</span><span class="p">,</span> <span class="n">kCH2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;FRR(</span><span class="si">{</span><span class="n">kCH1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">kCH2</span><span class="si">}</span><span class="s1">) = </span><span class="si">{</span><span class="n">frr</span><span class="si">}</span><span class="s1"> sec.&#39;</span><span class="p">)</span>
    
    <span class="c1"># Control of active measurements</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> <span class="c1"># update with active measurements on the scope</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">remove_all</span><span class="p">()</span> <span class="c1"># Clean up all active measurements</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="n">kCH1</span><span class="p">)</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">kCH1</span><span class="p">,</span> <span class="n">kCH2</span><span class="p">)</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">kCH2</span><span class="p">)</span> <span class="c1"># adding an existing one is equivalent to modification</span>
    <span class="n">high_of_kCH2</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">_value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Get value of item 1.</span>
    <span class="n">phase_diff</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">_value</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> 
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Increase all reference levels by 3%</span>
    <span class="n">rlvls</span> <span class="o">=</span> <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_reference_levels</span><span class="p">()</span>
    <span class="n">rlvls</span><span class="p">[</span><span class="s1">&#39;HIGH&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">3.0</span>
    <span class="n">rlvls</span><span class="p">[</span><span class="s1">&#39;MID&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">3.0</span>
    <span class="n">rlvls</span><span class="p">[</span><span class="s1">&#39;MID2&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">3.0</span>
    <span class="n">rlvls</span><span class="p">[</span><span class="s1">&#39;HIGH&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">3.0</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">set_reference_levels</span><span class="p">(</span><span class="n">rlvls</span><span class="p">)</span>

    <span class="c1"># Set the high level to 95%</span>
    <span class="n">myDso</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">set_reference_levels</span><span class="p">({</span><span class="s1">&#39;HIGH&#39;</span> <span class="p">:</span> <span class="mf">95.0</span><span class="p">},</span> <span class="s1">&#39;percent&#39;</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, GW Instek.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>